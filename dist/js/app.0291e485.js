(function(t){function e(e){for(var a,i,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)i=r[d],o[i]&&p.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),o=n.n(a);o.a},1:function(t,e){},"17a4":function(t,e,n){},2766:function(t,e,n){},"38e1":function(t,e,n){"use strict";var a=n("17a4"),o=n.n(a);o.a},"4f84":function(t,e,n){"use strict";var a=n("7e01"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Slideout",{attrs:{touch:!1,toggleSelectors:[".toggle-button",".searchButton"]},on:{"on-open":t.logger}},[n("GoogleMapSearch")],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"GoogleMapSearch"},[n("nav",{attrs:{id:"menu"}},[n("div",{staticClass:"logo"}),t._m(0),n("section",[n("CustomFilter",{attrs:{filterGroup:t.filterGroup},on:{updateGroup:t.filterServiceRequests}})],1)]),n("main",{attrs:{id:"panel"}},[t._m(1),n("transition",{attrs:{name:"fade"}},[t.showSrBox?n("serviceRequest",{attrs:{infoContent:t.infoContent},on:{"enlarge-text":t.sayHi}}):t._e()],1),n("b-loading",{attrs:{"is-full-page":t.isFullPage,active:t.isLoading,"can-cancel":!0},on:{"update:active":function(e){t.isLoading=e}}}),t.points.length?n("div",{key:t.points},[n("vue-google-heatmap",{staticStyle:{width:"100%",height:"100vh"},attrs:{points:t.points,lat:t.center.lat,lng:t.center.lng,"initial-zoom":12}})],1):t._e()],1)])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"content"},[n("b",[t._v("Optional Filters")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",[n("button",{staticClass:"toggle-button"},[t._v("â˜°")])])])}],c=(n("6762"),n("2fdb"),n("ac6a"),n("be94")),l=n("bc3a"),u=n.n(l),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"customfilter"},[n("b-collapse",{staticClass:"filterbutton",attrs:{open:!1}},[n("button",{staticClass:"button is-primary",attrs:{slot:"trigger"},slot:"trigger"},[t._v("Toggle Filter!")]),n("b-checkbox-button",{attrs:{"native-value":"NYPD",type:"is-danger"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("New York Police Department")])]),n("b-checkbox-button",{attrs:{"native-value":"DSNY",type:"is-success"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Department of Sanitation")])]),n("b-checkbox-button",{attrs:{"native-value":"DPR"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Dep of Parks and Rec")])]),n("b-checkbox-button",{attrs:{"native-value":"EDC"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Economic Dev Corp")])]),n("b-checkbox-button",{attrs:{"native-value":"DOT"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Dep of Transportation")])]),n("b-checkbox-button",{attrs:{"native-value":"DOHMH"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Dep of Health and Mental Hygiene")])]),n("b-checkbox-button",{attrs:{"native-value":"DHS"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Dep of Homeless Services")])]),n("b-checkbox-button",{attrs:{"native-value":"TLC"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Taxi and Limo Commis")])]),n("b-checkbox-button",{attrs:{"native-value":"DOITT"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("LinkNYC Unit")])]),n("b-checkbox-button",{attrs:{"native-value":"DEP"},model:{value:t.filterGroup.agencyName,callback:function(e){t.$set(t.filterGroup,"agencyName",e)},expression:"filterGroup.agencyName"}},[n("span",[t._v("Dep of Environ Protection")])])],1),n("b-collapse",{staticClass:"filterbutton",attrs:{open:!1}},[n("button",{staticClass:"button is-primary",attrs:{slot:"trigger"},slot:"trigger"},[t._v("Status Filter!")]),n("b-checkbox-button",{attrs:{"native-value":"Open"},model:{value:t.filterGroup.statusType,callback:function(e){t.$set(t.filterGroup,"statusType",e)},expression:"filterGroup.statusType"}},[n("span",[t._v("Open")])]),n("b-checkbox-button",{attrs:{"native-value":"Closed"},model:{value:t.filterGroup.statusType,callback:function(e){t.$set(t.filterGroup,"statusType",e)},expression:"filterGroup.statusType"}},[n("span",[t._v("Closed")])]),n("b-checkbox-button",{attrs:{"native-value":"Assigned"},model:{value:t.filterGroup.statusType,callback:function(e){t.$set(t.filterGroup,"statusType",e)},expression:"filterGroup.statusType"}},[n("span",[t._v("Assigned")])])],1),n("div",[n("b-field",{attrs:{label:"Service requests between"}},[n("b-datepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar-today",readonly:!0},model:{value:t.filterGroup.date.start,callback:function(e){t.$set(t.filterGroup.date,"start",e)},expression:"filterGroup.date.start"}})],1)],1),n("div",[n("b-field",{attrs:{label:"and:"}},[n("b-datepicker",{attrs:{placeholder:"Type or select a date...",icon:"calendar-today",readonly:!0},model:{value:t.filterGroup.date.end,callback:function(e){t.$set(t.filterGroup.date,"end",e)},expression:"filterGroup.date.end"}})],1)],1)],1)},p=[],f={name:"customfilter",data:function(){var t=new Date;return t=t.setDate(t.getDate()-1),console.log(t),{filterGroup:{agencyName:[],statusType:[],date:{start:new Date(t),end:new Date}}}},methods:{test:function(){console.log("test")}},watch:{filterGroup:{handler:function(t){this.$emit("updateGroup",t)},deep:!0}},props:[""]},v=f,g=(n("b9d0"),n("2877")),m=Object(g["a"])(v,d,p,!1,null,"b76d290c",null);m.options.__file="CustomFilter.vue";var h=m.exports,b=(n("dc22"),n("2f62")),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"serviceRequests"},[n("div",{staticClass:"container is-fluid srBox"},[n("div",{staticClass:"closeSrBox"},[n("button",{on:{click:function(e){t.$emit("enlarge-text")}}},[t._v("X")])]),n("h2",[t._v("Service Request #"+t._s(t.infoContent.uniquekey)+" ")]),n("div",{staticClass:"columns is-multiline"},[n("div",{staticClass:"column is-one-fifth"},[n("h3",[t._v("Status")]),n("div",{staticClass:"status"},[t._v(t._s(t.infoContent.status))])]),n("div",{staticClass:"column is-one-fifth"},[n("div",{staticClass:"columns is-multiline is-mobile"},[n("div",{staticClass:"column"},[n("h3",[t._v(" Date Created ")]),n("h4",[t._v(" "+t._s(t.infoContent.created_date))])]),n("div",{staticClass:"column"},[n("h3",[t._v(" Date Closed ")]),n("h4",[t._v(" "+t._s(t.infoContent.closed_date))])])])]),n("div",{staticClass:"column last-col"},[n("div",{staticClass:"columns is-multiline is-mobile"},[n("div",{staticClass:"column"},[n("h3",[t._v(" Agency ")]),n("h4",[t._v(" "+t._s(t.infoContent.agency_name))])]),n("div",{staticClass:"column"},[n("h3",[t._v(" Incident Address ")]),n("h4",[t._v(" "+t._s(t.infoContent.incident_address)+" ")])])])])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-fourth"},[n("h3",[t._v("Complaint Type")]),n("h4",[t._v(" "+t._s(t.infoContent.complaint_type))])]),n("div",{staticClass:"column is-two-thirds"},[n("h3",[t._v("Complaint Description")]),n("h4",[t._v(" "+t._s(t.infoContent.description)+" ")])])]),n("div",{staticClass:"columns lastItem"},[n("div",{staticClass:"column"},[n("h3",[t._v("Resolution Description")]),n("h4",[t._v(" "+t._s(t.infoContent.resolution))])])])])])},_=[],C={props:["infoContent","showSrBox"],methods:{notify:function(){this.$dispatch("child-msg",this.first_column),this.msg=" "}},data:function(){return{first_column:"1st",second_column:"2nd",third_column:"3rd",fourth_column:"4th"}}},x=C,G=(n("38e1"),Object(g["a"])(x,y,_,!1,null,"620213e2",null));G.options.__file="serviceRequest.vue";var k=G.exports,S={name:"googlemapsearch",components:{CustomFilter:h,serviceRequest:k},data:function(){return{points:[],center:{lat:40.73061,lng:-73.935242},infoOpened:!1,infoCurrentKey:null,showSrBox:!1,infoOptions:{pixelOffset:{width:0,height:-35}}}},computed:Object(c["a"])({},Object(b["c"])(["getAddress"])),mounted:function(){this.geolocate(),this.isLoading=!0},methods:Object(c["a"])({sayHi:function(){this.showSrBox=!1},setPlace:function(t){this.currentPlace=t},convertToDate:function(t){var e=t;return e.substring(5,7)+"/"+e.substring(8,10)+"/"+e.substring(0,4)},getPosition:function(t,e){return{lat:parseFloat(t[e].lat),lng:parseFloat(t[e].lng),status:parseFloat(t[e].status)}},getLatLngCoors:function(){if(this.isLoading=!0,this.currentPlace){var t={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.center=t,this.markers=[],this.$store.dispatch("updateAddressValue",t),this.getServiceRequest(this.$store.getters.getAddress),this.currentPlace=null}},getServiceRequest:function(t){var e=this,n=new Date,a=new Date,o=0;a.setDate(n.getDate()-o),n=n.toISOString().substring(0,n.toISOString().indexOf(".")),a=a.toISOString().substring(0,a.toISOString().indexOf("."));var s="https://data.cityofnewyork.us/resource/fhrw-4uyv.json?",i=s;console.log("original"),i+="&$limit=100",u.a.get(i).then(function(t){return e.convertRequestsToPoints(t.data)})},filterServiceRequests:function(t){var e=this,n="https://data.cityofnewyork.us/resource/fhrw-4uyv.json?",a=(this.$store.getters.getAddress,n+"$where=");for(var o in this.isLoading=!0,t)switch(o){case"agencyName":t[o].forEach(function(t,e){a+=0==e?encodeURI("&agency=")+"%27"+encodeURI(t)+"%27":"%20or%20agency=%27"+t+"%27"});break;case"date":var s=t[o]["start"].toISOString();s=s.substring(0,s.indexOf("."));var i=t[o]["end"].toISOString();i=i.substring(0,i.indexOf(".")),(a.includes("agency")||a.includes("status"))&&(a+=encodeURI(" and ")),a+=encodeURI("created_date between")+"%27"+encodeURI(s)+"%27"+encodeURI(" and ")+"%27"+encodeURI(i)+"%27";break;case"statusType":t[o].forEach(function(t,e){a+=0==e?encodeURI("&status=")+"%27"+t+"%27":"%20or%20agency=%27"+t+"%27"});break}a+="&$limit=100",u.a.get(a).then(function(t){return e.convertRequestsToPoints(t.data)}).catch(function(t){e.points=[{lat:0,lng:0}],console.error(t)})},convertRequestsToPoints:function(t){var e=[];t.forEach(function(t){t.latitude&&t.longitude&&e.push({lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)})}),0==e.length?this.points=[{lat:0,lng:0}]:this.points=e,this.isLoading=!1,console.log(this.points)},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition(function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude},t.$store.dispatch("updateAddressValue",t.center),t.getServiceRequest(t.$store.getters.getAddress)})}},Object(b["d"])(["updateAddress"]),Object(b["b"])(["updateAddressValue"])),props:{msg:String},events:{"child-msg":function(t){console.log(t)}}},O=S,w=(n("4f84"),Object(g["a"])(O,i,r,!1,null,"877b20f2",null));w.options.__file="GoogleMapSearch.vue";var A=w.exports,N=n("9098"),$=n.n(N),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-modal",{attrs:{active:t.isCardModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isCardModalActive=e}}},[n("div",{staticClass:"modal-card",staticStyle:{width:"85vh"}},[n("header",{staticClass:"modal-card-head"},[n("div",{staticClass:"modal-card-title"})]),n("section",{staticClass:"modal-card-body"},[n("p",[t._v(" Welcome to the 311 Service Requests portal. Using this website you can see the currently open and recently closed 311 Service Requests in your area or area of choosing. You can also filter the results based on Status, Agency, Closed & Ceated Dates. A data anaylsis feature is currently in development.\n"),n("br"),n("br"),t._v("\nThis website uses cookies to enhance your exeperience. If you do not wish to use cookies, please click Opt-Out.\n"),n("br"),n("br"),t._v("\nCreated by:\nAmmar Karim & Nabil Ahmed Khatri")])]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.isCardModalActive=!1}}},[t._v("Opt Out")]),n("button",{staticClass:"button is-primary",on:{click:function(e){t.isCardModalActive=!1}}},[t._v("Accept")])])])])],1)},T=[],R={data:function(){return{isCardModalActive:!0}}},P=R,j=(n("c0b1"),Object(g["a"])(P,D,T,!1,null,"8a3a0342",null));j.options.__file="Modal.vue";var I=j.exports,q={name:"app",components:{Modal:I,GoogleMapSearch:A,Slideout:$.a},mounted:function(){},methods:{logger:function(){}}},M=q,E=(n("034f"),Object(g["a"])(M,o,s,!1,null,null,null));E.options.__file="App.vue";var F=E.exports,L=n("8a03"),H=n.n(L),U=(n("755e"),n("cd79")),B=n("28dd");a["default"].use(b["a"]);var Y=new b["a"].Store({state:{address:{lat:0,lng:0}},getters:{getAddress:function(t){return t.address}},mutations:{updateAddress:function(t,e){t.address.lat=e.lat,t.address.lng=e.lng}},actions:{updateAddressValue:function(t,e){t.commit("updateAddress",e)}}}),K=(n("5abe"),n("3949"));a["default"].component("vue-cookie-accept-decline",K["a"]),a["default"].use(H.a),a["default"].use(b["a"]),a["default"].use(B["a"]),a["default"].http.headers.common["Content-Type"]="application/json",a["default"].http.headers.common["Access-Control-Allow-Origin"]="*",a["default"].http.headers.common["Accept"]="application/json, text/plain, */*",a["default"].http.headers.common["Access-Control-Allow-Headers"]="Origin, Accept, Content-Type, Authorization, Access-Control-Allow-Origin",a["default"].use(U["a"],{apiKey:"AIzaSyCvX_Ii3_7Lg11PF3dOi95f1t3HywAdsLw",libraries:"places"}),a["default"].config.productionTip=!1,new a["default"]({store:Y,render:function(t){return t(F)}}).$mount("#app")},"64a9":function(t,e,n){},"7e01":function(t,e,n){},b9d0:function(t,e,n){"use strict";var a=n("f1fd"),o=n.n(a);o.a},c0b1:function(t,e,n){"use strict";var a=n("2766"),o=n.n(a);o.a},f1fd:function(t,e,n){}});
//# sourceMappingURL=app.0291e485.js.map